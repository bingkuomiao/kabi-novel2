<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="
        width=device-width,
        initial-scale=1.0,
        minimum-scale=1.0,
        maximum-scale=1.0,
        user-scalable=no">
    <title>kabi novel</title>
    <!-- inject:css -->
    <style>.page,body,html{position:relative;height:100%;width:100%}body,html{overflow:hidden;margin:0;padding:0;background-color:#fff;font-size:14px}body .button,html .button{min-width:100px;padding:0 10px;font-size:60px;display:inline-block;border:1px solid #333;text-align:center;justify-content:center}.page{display:none}.page.show{display:block}.page .content{height:100%;padding-bottom:230px;padding-top:40px}.page .bar{height:50px;background-color:#ccc;position:absolute;bottom:180px;width:100%}.page .control{height:180px;background-color:#eee;position:absolute;bottom:0;width:100%;padding-top:20px}.page .control .left-box{float:left}.config .content .right,.page .control .right-box{float:right}.page .control .button{line-height:160px;height:100%;margin:0 20px}.config .content{padding:20px 40px;font-size:30px;line-height:40px}.config .content .button{margin-left:10px}.config .form-item{padding:10px 0}.config .form-item .label::after{content:"："}.config .form-item .text{line-height:60px}.config .form-item.display .text{height:400px;border:1px solid #ccc;padding:10px;line-height:20px;font-size:16px;overflow:auto}.config .form-item.display .text p{margin:0;text-indent:2em}.modal-box .modal{position:absolute;min-width:600px;min-height:600px;left:50%;top:50%;margin-left:-300px;margin-top:-300px;border:1px solid #ccc;background-color:#fff}.modal-box .modal .modal-content{height:500px;padding:10px}.modal-box .modal .modal-footer{height:100px;text-align:center;border-top:1px solid #ccc;line-height:100px}.modal-box .modal .modal-footer .button{height:90px;margin:0 20px;vertical-align:middle;line-height:90px}.message-box{position:fixed;top:0;left:0;right:0}.message-box .message{text-align:center;padding:5px}.message-box .message .message-content{display:inline-block;height:60px;background-color:#666;font-size:50px;line-height:60px;color:#fff;border-radius:8px}</style>
    <!-- endinject -->
    <!-- inject:js -->
    <script>!function n(i,r,s){function c(t,e){if(!r[t]){if(!i[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(a)return a(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}o=r[t]={exports:{}},i[t][0].call(o.exports,function(e){return c(i[t][1][e]||e)},o,o.exports,n,i,r,s)}return r[t].exports}for(var a="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,o){g=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};var g,n,i,r,s,c=s={compressToBase64:function(e){if(null==e)return"";var t=s._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:s._decompress(t.length,32,function(e){return a(n,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":s._compress(e,15,function(e){return g(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:s._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),o=new Uint8Array(2*t.length),n=0,i=t.length;n<i;n++){var r=t.charCodeAt(n);o[2*n]=r>>>8,o[2*n+1]=r%256}return o},decompressFromUint8Array:function(e){if(null==e)return s.decompress(e);for(var t=new Array(e.length/2),o=0,n=t.length;o<n;o++)t[o]=256*e[2*o]+e[2*o+1];var i=[];return t.forEach(function(e){i.push(g(e))}),s.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,function(e){return i.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),s._decompress(t.length,32,function(e){return a(i,t.charAt(e))}))},compress:function(e){return s._compress(e,16,function(e){return g(e)})},_compress:function(e,t,o){if(null==e)return"";for(var n,i,r,s,c={},a={},u="",l=2,d=3,f=2,h=[],p=0,m=0,w=0;w<e.length;w+=1)if(r=e.charAt(w),Object.prototype.hasOwnProperty.call(c,r)||(c[r]=d++,a[r]=!0),s=u+r,Object.prototype.hasOwnProperty.call(c,s))u=s;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(n=0;n<f;n++)p<<=1,m==t-1?(m=0,h.push(o(p)),p=0):m++;for(i=u.charCodeAt(0),n=0;n<8;n++)p=p<<1|1&i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i>>=1}else{for(i=1,n=0;n<f;n++)p=p<<1|i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)p=p<<1|1&i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i>>=1}0==--l&&(l=Math.pow(2,f),f++),delete a[u]}else for(i=c[u],n=0;n<f;n++)p=p<<1|1&i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i>>=1;0==--l&&(l=Math.pow(2,f),f++),c[s]=d++,u=String(r)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(n=0;n<f;n++)p<<=1,m==t-1?(m=0,h.push(o(p)),p=0):m++;for(i=u.charCodeAt(0),n=0;n<8;n++)p=p<<1|1&i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i>>=1}else{for(i=1,n=0;n<f;n++)p=p<<1|i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)p=p<<1|1&i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i>>=1}0==--l&&(l=Math.pow(2,f),f++),delete a[u]}else for(i=c[u],n=0;n<f;n++)p=p<<1|1&i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i>>=1;0==--l&&(l=Math.pow(2,f),f++)}for(i=2,n=0;n<f;n++)p=p<<1|1&i,m==t-1?(m=0,h.push(o(p)),p=0):m++,i>>=1;for(;;){if(p<<=1,m==t-1){h.push(o(p));break}m++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:s._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,o){for(var n,i,r,s,c,a,u=[],l=4,d=4,f=3,h="",p=[],m={val:o(0),position:t,index:1},w=0;w<3;w+=1)u[w]=w;for(i=0,s=Math.pow(2,2),c=1;c!=s;)r=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=o(m.index++)),i|=(0<r?1:0)*c,c<<=1;switch(i){case 0:for(i=0,s=Math.pow(2,8),c=1;c!=s;)r=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=o(m.index++)),i|=(0<r?1:0)*c,c<<=1;a=g(i);break;case 1:for(i=0,s=Math.pow(2,16),c=1;c!=s;)r=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=o(m.index++)),i|=(0<r?1:0)*c,c<<=1;a=g(i);break;case 2:return""}for(n=u[3]=a,p.push(a);;){if(e<m.index)return"";for(i=0,s=Math.pow(2,f),c=1;c!=s;)r=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=o(m.index++)),i|=(0<r?1:0)*c,c<<=1;switch(a=i){case 0:for(i=0,s=Math.pow(2,8),c=1;c!=s;)r=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=o(m.index++)),i|=(0<r?1:0)*c,c<<=1;u[d++]=g(i),a=d-1,l--;break;case 1:for(i=0,s=Math.pow(2,16),c=1;c!=s;)r=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=o(m.index++)),i|=(0<r?1:0)*c,c<<=1;u[d++]=g(i),a=d-1,l--;break;case 2:return p.join("")}if(0==l&&(l=Math.pow(2,f),f++),u[a])h=u[a];else{if(a!==d)return null;h=n+n.charAt(0)}p.push(h),u[d++]=n+h.charAt(0),n=h,0==--l&&(l=Math.pow(2,f),f++)}}};function a(e,t){if(!r[e]){r[e]={};for(var o=0;o<e.length;o++)r[e][e.charAt(o)]=o}return r[e][t]}"function"==typeof define&&define.amd?define(function(){return c}):void 0!==t&&null!=t?t.exports=c:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return c})},{}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){this.element=document.querySelector(".page.bookshelf")}},{}],3:[function(e,t,o){"use strict";function n(){if(window.Bind)throw Error("bind has been inited");(window.Bind=this).cbMap={},this.objIndex=0,this.objMap={}}Object.defineProperty(o,"__esModule",{value:!0}),n.prototype.handleObj=function(o,n){var i,r=this;o.hasOwnProperty("_bindId")||(o._bindId=this.objIndex++),this.cbMap[o._bindId+n]||(o[i="_"+n]=o[n],this.cbMap[o._bindId+n]=[],Object.defineProperty(o,n,{get:function(){return o[i]},set:function(e){var t=o[i];o[i]=e,r.run(o,n,e,t)}}))},n.prototype.bindStyle=function(t,e,o,n,i){this.bind(e,o,function(e){t.style[n]=i?i(e):e},!0)},n.prototype.bindView=function(t,e,o){this.bind(e,o,function(e){t.innerHTML=e},!0)},n.prototype.bind=function(e,t,o,n){this.handleObj(e,t),this.cbMap[e._bindId+t].push(o),n&&o(e[t])},n.prototype.run=function(e,t,o,n){this.cbMap[e._bindId+t].forEach(function(e){try{e(o,n)}catch(e){throw e}})},o.default=n},{}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.strToDom=void 0,o.strToDom=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children}},{}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){window.onerror=function(e){console.error(e),window.Modal&&window.Modal.add({content:e.toString()})}}},{}],6:[function(e,t,o){"use strict";function n(){if(window.Layout)throw Error("layout has been inited");(window.Layout=this).limit={fontSize:16,lineHeight:20},this.base={fontSize:30,lineHeight:40},this.fontSize=parseInt(window.Store.get("fontSize")||this.base.fontSize.toString()),this.lineHeight=parseInt(window.Store.get("lineHeight")||this.base.lineHeight.toString())}Object.defineProperty(o,"__esModule",{value:!0}),n.prototype.set=function(e,t){this[e]=t||this.base[e],window.Store.set(e,this[e].toString())},n.prototype.add=function(e,t){var o=this[e];(o+=t)<this.limit[e]&&(o=this.limit[e]),this.set(e,o)},n.prototype.reset=function(e){e?this.set(e):(this.set("fontSize"),this.set("lineHeight"))},o.default=n},{}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common"),i=(r.prototype.remove=function(){this.body.parentElement.removeChild(this.body)},r);function r(e){var t=this,o=(0,n.strToDom)('\n            <div class="message">\n                <div class="message-content">\n                </div>\n            </div>\n        ')[0],o=(this.body=o).querySelector(".message-content");o.innerHTML=e.content,o.onclick=function(){e.onOk&&e.onOk(),t.remove()},e.banAutoRemove||window.setTimeout(function(){e.onCancle&&e.onCancle(),t.remove()},1e3)}function s(){if(window.Message)throw Error("modal has been inited");this.list=[],(window.Message=this).element=document.querySelector(".message-box")}s.prototype.add=function(e){e=new i(e);return this.list.push(e),this.element.appendChild(e.body),e},s.prototype.remove=function(e){e.remove();e=this.list.indexOf(e);this.list.splice(e,1)},s.prototype.clear=function(){this.list=[],this.element.innerHTML=""},o.default=s},{"../common":4}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("../common"),n=(i.prototype.remove=function(){this.body.parentElement.removeChild(this.body)},i);function i(e){var t=this,o=(this.zIndex=e.zIndex,'\n            <div class="modal" style="z-index: '.concat(this.zIndex,';">\n                <div class="modal-content">\n                </div>\n                <div class="modal-footer">\n                    <div class="button modal-confirm">确定</div>\n                    <div class="button modal-cancel">取消</div>\n                </div>\n            </div>\n        ')),o=(0,r.strToDom)(o)[0],n=(this.body=o).querySelector(".modal-content"),i=o.querySelector(".modal-confirm"),o=o.querySelector(".modal-cancel");"string"==typeof e.content?n.innerHTML=e.content:n.appendChild(e.content),o.onclick=function(){e.onCancel&&e.onCancel(),t.remove()},i.onclick=function(){e.onOk&&e.onOk(),t.remove()}}function s(){if(window.Modal)throw Error("modal has been inited");this.list=[],(window.Modal=this).element=document.querySelector(".modal-box")}s.prototype.add=function(e){"zIndex"in e||(t=this.list.length,e.zIndex=(t?this.list[t-1].zIndex:100)+1);var t=new n(e);return this.list.push(t),this.element.appendChild(t.body),t},s.prototype.remove=function(e){e.remove();e=this.list.indexOf(e);this.list.splice(e,1)},s.prototype.clear=function(){this.list=[],this.element.innerHTML=""},o.default=s},{"../common":4}],9:[function(e,t,o){"use strict";function n(e){var n=this;if(window.Router)throw Error("router has been inited");(window.Router=this).pages=e;function t(e){var t=window.location.hash,o=t.lastIndexOf("#");-1<o&&(t=t.slice(o+1)),0!==n.pages.length&&(-1===n.pages.indexOf(t)?window.location.hash=n.pages[0]:n.switchPage(t))}(window.onhashchange=t)()}Object.defineProperty(o,"__esModule",{value:!0}),n.prototype.switchPage=function(e){var t;null!=(t=document.querySelector(".show"))&&t.classList.remove("show"),null!=(t=document.querySelector(".".concat(e)))&&t.classList.add("show")},n.prototype.go=function(e){window.location.hash=e},o.default=n},{}],10:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("lz-string");function n(){if(window.Store)throw Error("store has been inited");(window.Store=this).limit=parseInt(this.get("limit")||"0"),this.usage=0,this.checkUsage()}n.prototype.set=function(e,t,o){try{var n=r.compress(e),i=r.compress(t);localStorage.setItem(n,i),this.checkUsage(),o&&o.success&&o.success()}catch(e){window.Message.add({content:"缓存失败，空间不足"}),o&&o.fail&&o.fail()}},n.prototype.get=function(e){e=localStorage.getItem(r.compress(e));return e?r.decompress(e):null},n.prototype.checkUsage=function(){this.usage=Object.keys(localStorage).map(function(e){return e+localStorage.getItem(e)}).join("").length},n.prototype.checkLimit=function(){var i=this;window.Message.add({content:"正在检测缓存容量"}),this.limitChecking||(this.limitChecking=!0,window.setTimeout(function(){for(var e=i.usage,t=1e6,o=0;2<t;)try{var n="_test".concat(o++);localStorage.setItem(n,new Array(t-n.length+1).join("a")),e+=t}catch(e){console.log(e),o--,t=Math.round(t/2)}i.limit=e,Object.keys(localStorage).filter(function(e){return 0===e.indexOf("_test")}).forEach(function(e){return localStorage.removeItem(e)}),i.set("limit",i.limit.toString()),i.limitChecking=!1,window.Message.add({content:"检测完成"})},1e3))},o.default=n},{"lz-string":1}],11:[function(e,t,o){"use strict";function n(){this.element=document.querySelector(".page.config"),this.loadingMap={},this.makeDisplayText(),window.Bind.bindView(this.element.querySelector(".store-usage"),window.Store,"usage"),window.Bind.bindView(this.element.querySelector(".store-total"),window.Store,"limit"),window.Bind.bindView(this.element.querySelector(".font-size"),window.Layout,"fontSize"),window.Bind.bindView(this.element.querySelector(".line-height"),window.Layout,"lineHeight");var e=this.element.querySelector(".display .text p");window.Bind.bindView(e,this,"displayText"),window.Bind.bindStyle(e,window.Layout,"fontSize","fontSize",function(e){return"".concat(e,"px")}),window.Bind.bindStyle(e,window.Layout,"lineHeight","lineHeight",function(e){return"".concat(e,"px")}),this.checkApi()}Object.defineProperty(o,"__esModule",{value:!0}),n.prototype.makeDisplayText=function(){var e=new Array(100).join("测试文本");this.displayText=e},n.prototype.checkApi=function(){},n.prototype.checkStore=function(){this.loadingMap.checkStore=!0,window.Store.checkLimit()},o.default=n},{}],12:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("./bookshelf/bookshelf"),i=e("./config/config"),r=e("./common/router/router"),s=e("./common/debugger/debugger"),c=e("./common/modal/modal"),a=e("./common/message/message"),u=e("./common/store/store"),l=e("./common/bind/bind"),d=e("./common/layout/layout"),f=["bookshelf","article","catalogue","config"];window.init=function(){new s.default,new l.default,new c.default,new a.default,new r.default(f),new u.default,new d.default,window.Config=new i.default;var e=new n.default;console.log(e)},window.ondblclick=function(e){e.preventDefault()}},{"./bookshelf/bookshelf":2,"./common/bind/bind":3,"./common/debugger/debugger":5,"./common/layout/layout":6,"./common/message/message":7,"./common/modal/modal":8,"./common/router/router":9,"./common/store/store":10,"./config/config":11}]},{},[12]);</script>
    <!-- endinject -->
</head>

<body onload="init()">
    <div class="page bookshelf show">
        <div class="content">bookshelf</div>
        <div class="bar"></div>
        <div class="control">
            <div class="left-box">
                <div class="button" onclick="Router.go('config')">配置</div>
                <div class="button" onclick="">刷新</div>
            </div>
            <div class="right-box">
                <div class="button">&lt;</div>
                <div class="button">&gt;</div>
            </div>
        </div>
    </div>
    <div class="page article">
        <div class="content">article</div>
        <div class="bar"></div>
        <div class="control">
            <div class="button" onclick="Router.go('bookshelf')">书架</div>
            <div class="button" onclick="Router.go('catalogue')">目录</div>
            <div class="button">&lt;&lt;</div>
            <div class="button">&gt;&gt;</div>
            <div class="button">&lt;</div>
            <div class="button" onclick="nextPage()">&gt;</div>
        </div>
    </div>
    <div class="page catalogue">
        <div class="content">catalogue</div>
        <div class="bar"></div>
        <div class="control">
            <div class="button" onclick="Router.go('bookshelf')">书架</div>
            <div class="button" onclick="Router.go('article')">文章</div>
            <div class="button">&lt;</div>
            <div class="button">&gt;</div>
        </div>
    </div>
    <div class="page config">
        <div class="content">
            <div class="form-item">
                <div class="label">服务器地址</div>
                <div class="text">
                    <input type="text" value="" placeholder="请输入阅读服务地址"/>
                    <div class="button right">测试</div>
                </div>
            </div>
            <div class="form-item">
                <div class="label">缓存容量</div>
                <div class="text">
                    <span class="store-usage">-</span>
                    <span class="store-division">/</span>
                    <span class="store-total">-</span>
                    <span class="store-percent"></span>
                    <div class="button right" onclick="Store.checkLimit()">检测</div>
                </div>
            </div>
            <div class="form-item">
                <div class="label">字号</div>
                <div class="text">
                    <span class="font-size">16</span>
                    <span class="font-unit">px</span>
                    <div class="button right" onclick="Layout.reset('fontSize')">重置</div>
                    <div class="button right" onclick="Layout.add('fontSize', -1)">-</div>
                    <div class="button right" onclick="Layout.add('fontSize', 1)">+</div>
                </div>
            </div>
            <div class="form-item">
                <div class="label">行距</div>
                <div class="text">
                    <span class="line-height">20</span>
                    <span class="line-unit">px</span>
                    <div class="button right" onclick="Layout.reset('lineHeight')">重置</div>
                    <div class="button right" onclick="Layout.add('lineHeight', -1)">-</div>
                    <div class="button right" onclick="Layout.add('lineHeight', 1)">+</div>
                </div>
            </div>
            <div class="form-item display">
                <div class="label">效果展示</div>
                <div class="text">
                    <p>测试文本</p>
                </div>
            </div>
        </div>
        <div class="control">
            <div class="left-box">
                <div class="button" onclick="Router.go('bookshelf')">书架</div>
            </div>
            <div class="right-box">
                <!-- <div class="button" onclick="">保存</div> -->
            </div>
        </div>
    </div>

    <div class="modal-box"></div>
    <div class="message-box"></div>
</body>

</html>